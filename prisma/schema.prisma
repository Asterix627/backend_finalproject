generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                          String      @id @default(uuid()) @db.Char(36)
  firstName                   String
  lastName                    String
  email                       String      @unique
  password                    String
  role                        String?     @db.VarChar(20) //guest, admin
  token                       String?     @db.VarChar(255)
  images                       Image[]
  studentRegisters StudentRegister[]
  createdAt                   DateTime    @default(now())
  updatedAt                   DateTime    @updatedAt
}

model StudentRegister {
  id         String   @id @default(uuid()) @db.Char(36)
  userId     String?  // Reference to User model
  status     String?  @db.VarChar(20) // pending, approved, rejected
  user       User?    @relation(fields: [userId], references: [id])
}


model Teacher {
  id        String   @id @default(uuid()) @db.Char(36)
  fullName  String   @db.VarChar(255)
  NIP       String   @db.VarChar(255)
  position String   @db.VarChar(255)
  images    Image[]
  address   String   @db.VarChar(255)
  subjects  String   @db.VarChar(255)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Ekskul {
  id        String   @id @default(uuid()) @db.Char(36)
  extraName String   @db.VarChar(255)
  category  String   @db.VarChar(255)
  description String @db.Text
  images    Image[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}


model Image {
  id         String   @id @default(uuid()) @db.Char(36)
  imageName  String   @db.VarChar(255)
  imageUrl   String   @db.VarChar(255)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  userId  String? 
  teacherId  String?
  ekskulId   String?
  teacher    Teacher? @relation(fields: [teacherId], references: [id])
  ekskul     Ekskul?  @relation(fields: [ekskulId], references: [id])
  user    User? @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([teacherId])
  @@index([ekskulId])
}
